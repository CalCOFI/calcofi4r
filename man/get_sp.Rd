% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions.R
\name{get_sp}
\alias{get_sp}
\title{Retrieve Species Larval Abundance Data from Database}
\usage{
get_sp(sp_name, qtr, date_range, ck_children = T)
}
\arguments{
\item{sp_name}{Character vector of species names (format: "Common Name (Scientific Name)")}

\item{qtr}{Numeric vector of quarters to include (1-4)}

\item{date_range}{Date vector of length 2 (start date, end date)}

\item{ck_children}{Boolean (TRUE or FALSE) whether to include taxonomic children}
}
\value{
dbplyr lazy table with columns:
\itemize{
\item \code{name} - species name (common + scientific)
\item \code{tally} - raw larval count
\item \code{std_tally} - standardized tally (adjusted for haul factor and sorting proportion)
\item \code{time_start} - tow start datetime
\item \code{longitude}, \code{latitude} - spatial coordinates
\item \code{quarter} - quarter (1-4)
\item \code{hex_h3res*} - H3 hexagon indices at multiple resolutions
}
}
\description{
Queries species, larva, net, tow, and site tables with temporal filters,
computing standardized tally values. Returns a dbplyr lazy table for
efficient downstream processing.
}
\details{
The standardized tally accounts for differences in haul efficiency and
subsampling: \code{std_tally = std_haul_factor * tally / prop_sorted}.
Only records with non-NA tally values are returned.
}
\examples{
\dontrun{
# retrieve anchovy data for all quarters 2010-2020
df_sp <- get_sp(
  sp_name    = "Anchovy (Engraulis mordax)",
  qtr        = 1:4,
  date_range = as.Date(c("2010-01-01", "2020-12-31"))
)
df_sp |> collect()
}

}
\seealso{
\code{\link{prep_sp_hex}} for spatial aggregation

\code{\link{prep_ts_sp}} for temporal aggregation
}
