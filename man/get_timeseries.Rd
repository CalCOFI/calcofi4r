% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read.R
\name{get_timeseries}
\alias{get_timeseries}
\title{Get timeseries summary from CalCOFI API}
\usage{
get_timeseries(
  variable = "ctdcast_bottle.t_deg_c",
  aoi_wkt = NULL,
  depth_m_min = NULL,
  depth_m_max = NULL,
  date_beg = NULL,
  date_end = NULL,
  time_step = "year",
  stats = c("p10", "mean", "p90")
)
}
\arguments{
\item{variable}{Variable to fetch from the CalCOFI API. One of \code{table_field} values from \code{get_variables()}.
Default is \code{"ctdcast_bottle.t_deg_c"}.}

\item{aoi_wkt}{Area of interest (AOI), spatially described as
\href{https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry}{well-known text (WKT)}.}

\item{depth_m_min}{Minimum depth range in meters, e.g. 0. Default is \code{NULL}, as in not filtered.}

\item{depth_m_max}{Maximum depth range in meters, e.g. 5351. Default is \code{NULL}, as in not filtered.}

\item{date_beg}{Beginning of date range, e.g."1949-02-28". Default is \code{NULL}, as in not filtered.}

\item{date_end}{End of date range, e.g. "2020-01-26". Default is \code{NULL}, as in not filtered.}

\item{time_step}{Time step over which to summarize. One of: a sequential
increment ("decade","year","year.quarter","year.month","year.week","date"),
or a climatology ("quarter","month","week","julianday","hour").
Default is \code{"year"}.}

\item{stats}{Statistics to show per \code{date_step}. Acceptable values include any combination of:
"avg", "median", "min", "max", "sd" or "p#"
where "sd" is the standard deviation and
"p#" represents the percentile value 0 to 100 within available range of values.
Default is \code{c("p10", "mean", "p90")}.}
}
\value{
data frame of values
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#deprecated}{\figure{lifecycle-deprecated.svg}{options: alt='[Deprecated]'}}}{\strong{[Deprecated]}}

This function is deprecated because the CalCOFI API is being phased out
in favor of direct DuckDB database access. Query bottle measurement data
with \code{\link[=cc_get_db]{cc_get_db()}} and aggregate using dplyr for time series analysis.
}
\examples{
\dontrun{
# deprecated - use DuckDB queries instead:
con <- cc_get_db()
d <- DBI::dbGetQuery(con, "
  SELECT EXTRACT(YEAR FROM c.datetime_utc) AS year,
         AVG(bm.measurement_value) AS avg_temp
  FROM bottle_measurement bm
  JOIN bottle b ON bm.bottle_id = b.bottle_id
  JOIN casts c ON b.cast_id = c.cast_id
  WHERE bm.measurement_type = 'temperature'
  GROUP BY year ORDER BY year")
}
}
\concept{read}
